<template>
  <div
    class="min-h-screen bg-gray-150 text-gray-900"
    :initial="{ opacity: 0, y: -40 }"
    :animate="{ opacity: 1, y: 0 }"
    :transition="{ duration: 0.6, ease: 'easeOut' }"
  >


    <div class="max-w-7xl mx-auto px-4 py-8" dir="rtl">
      <div class="mb-6 flex items-center justify-between">
        <div>
          <h1 class="text-2xl font-bold">ุงููุธุงูู ุงูุนุฑุงููุฉ</h1>
          <p class="text-gray-600">ูุฑุต ุนูู ูู ุฃูุถู ุงูุดุฑูุงุช ุงูุนุฑุงููุฉ ๐ฎ๐ถ</p>
        </div>
        <div class="flex items-center gap-3">
          <input
            type="search"
            placeholder="ุฏููุฑ ุนูู ุนููุงู ุงููุธููุฉุ ุงูุดุฑูุฉ..."
            class="w-64 rounded-md bg-white border border-gray-300 px-3 py-2 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#0A66C2]"
          />
          <input
            type="text"
            placeholder="ุงููููุน: ุจุบุฏุงุฏุ ุฃุฑุจูู..."
            class="w-56 rounded-md bg-white border border-gray-300 px-3 py-2 text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-[#0A66C2]"
          />
          <button class="rounded-md bg-[#0A66C2] text-white px-4 py-2 text-sm hover:brightness-110 cursor-pointer">ุจุญุซ</button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
        <!-- filters -->
        <aside class="md:col-span-1 space-y-4">
          <div class="bg-white border border-gray-200 shadow-sm rounded-xl p-4 md:sticky md:top-24">
            <h2 class="font-semibold mb-3">ุชุตููุฉ ุงููุธุงูู</h2>
            <div class="space-y-3 text-sm text-gray-700">
              <div>
                <p class="font-medium mb-2">ููุน ุงูุนูู</p>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.fullTime" /> ุฏูุงู ูุงูู</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.partTime" /> ุฌุฒุฆู</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.remote" /> ุนู ุจูุนุฏ</label>
              </div>
              <div>
                <p class="font-medium mb-2">ุงูุฎุจุฑุฉ</p>
                <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="exp" class="rounded" value="junior" v-model="filters.experience" /> ูุจุชุฏุฆ</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="exp" class="rounded" value="mid" v-model="filters.experience" /> ูุชูุณุท</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="radio" name="exp" class="rounded" value="senior" v-model="filters.experience" /> ุฎุจูุฑ</label>
              </div>
              <div>
                <p class="font-medium mb-2">ุงููุญุงูุธุฉ</p>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.baghdad" /> ุจุบุฏุงุฏ</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.erbil" /> ุฃุฑุจูู</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.basra" /> ุงูุจุตุฑุฉ</label>
                <label class="flex items-center gap-2 cursor-pointer"><input type="checkbox" class="rounded" v-model="filters.mosul" /> ุงูููุตู</label>
              </div>
              <div>
                <p class="font-medium mb-2">ุงูุดุฑูุฉ</p>
                <input type="text" v-model="filters.company" placeholder="ุงูุชุจ ุงุณู ุงูุดุฑูุฉ" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2 text-sm" />
              </div>
            </div>
            <div class="mt-4 flex gap-2">
              <button class="px-3 py-1.5 rounded bg-gray-100 border border-gray-200 text-sm cursor-pointer" @click="resetFilters">ูุณุญ</button>
              <button class="px-3 py-1.5 rounded bg-[#0A66C2] text-white text-sm cursor-pointer" @click="applyFilters">ุชุทุจูู</button>
            </div>
          </div>

          <!-- Iraqi Tech Stats -->
          <div class="bg-white border border-gray-200 shadow-sm rounded-xl p-4">
            <h3 class="font-semibold mb-3">ุฅุญุตุงุฆูุงุช ุณูู ุงูุนูู ุงูุนุฑุงูู</h3>
            <div class="space-y-3 text-sm">
              <div class="flex justify-between">
                <span class="text-gray-600">ูุธุงุฆู ูุชุงุญุฉ</span>
                <span class="font-semibold text-[#0A66C2]">ูกูขูฅ</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">ุดุฑูุงุช ูุดุทุฉ</span>
                <span class="font-semibold">ูคูฅ</span>
              </div>
              <div class="flex justify-between">
                <span class="text-gray-600">ูุชูุณุท ุงูุฑุงุชุจ</span>
                <span class="font-semibold">ูขูซูฅู ุฏููุงุฑ</span>
              </div>
            </div>
          </div>
        </aside>

        <!-- job list -->
        <section class="md:col-span-2 space-y-3 md:max-h-[calc(100vh-220px)] overflow-y-auto pr-1 md:pr-2">
          <div
            v-for="job in filteredJobs"
            :key="job.id"
            class="bg-white border border-gray-200 rounded-xl shadow-sm p-4 cursor-pointer hover:border-[#0A66C2] transition-all"
            :class="{ 'ring-2 ring-[#0A66C2]/40 border-[#0A66C2] bg-[#0A66C2]/5': selectedJob && selectedJob.id === job.id }"
            @click="selectJob(job)"
          >
            <div class="flex items-start gap-3">
              <img :src="job.logo" alt="logo" class="h-10 w-10 rounded" />
              <div class="flex-1">
                <div class="flex items-center justify-between">
                  <h3 class="font-semibold">{{ job.title }}</h3>
                  <span class="text-xs text-gray-500">{{ job.postedAt }}</span>
                </div>
                <p class="text-sm text-gray-700">{{ job.company }} โข {{ job.location }}</p>
                <p class="text-xs text-gray-500">{{ job.region }} ๐ฎ๐ถ</p>
                <div class="mt-2 flex flex-wrap gap-2 text-xs text-gray-700">
                  <span class="px-2 py-1 rounded bg-gray-100 border border-gray-200" v-for="b in job.badges" :key="b">{{ b }}</span>
                </div>
                <div class="mt-3 flex items-center gap-2 text-sm">
                  <button class="px-3 py-1.5 rounded bg-[#0A66C2] text-white hover:brightness-110 cursor-pointer" @click.stop="openApply(job)">ุชูุฏูู ุณุฑูุน</button>
                  <button class="px-3 py-1.5 rounded bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200 cursor-pointer" @click.stop="toggleSave(job)">
                    {{ savedIds.has(job.id) ? 'ูุญููุธ' : 'ุญูุธ' }}
                  </button>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- details -->
        <aside class="md:col-span-1">
          <div class="bg-white border border-gray-200 shadow-sm rounded-xl p-4 md:sticky md:top-24" v-if="selectedJob">
            <div class="flex items-center gap-3">
              <img :src="selectedJob.logo" alt="logo" class="h-10 w-10 rounded" />
              <div>
                <h3 class="font-semibold">{{ selectedJob.title }}</h3>
                <p class="text-sm text-gray-700">{{ selectedJob.company }} โข {{ selectedJob.location }}</p>
                <p class="text-xs text-gray-500">{{ selectedJob.region }} ๐ฎ๐ถ</p>
              </div>
            </div>
            <div class="mt-3 text-sm text-gray-700 leading-6">
              <p class="font-semibold mb-1">ุงููุตู</p>
              <p>{{ selectedJob.description }}</p>
              <p class="font-semibold mt-3 mb-1">ุงููุชุทูุจุงุช</p>
              <ul class="list-disc pr-5 space-y-1">
                <li v-for="req in selectedJob.requirements" :key="req">{{ req }}</li>
              </ul>
              <div class="mt-3 p-3 bg-gradient-to-r from-amber-50 to-orange-50 rounded-lg border border-amber-200">
                <p class="font-semibold text-amber-800">ุงูุฑุงุชุจ ูุงููุฒุงูุง</p>
                <p class="text-amber-700 text-sm">{{ selectedJob.salary }}</p>
              </div>
            </div>
            <div class="mt-4 flex gap-2">
              <button class="px-3 py-1.5 rounded bg-[#0A66C2] text-white hover:brightness-110 cursor-pointer" @click="openApply(selectedJob)">ูุฏูู ูุณู</button>
              <button class="px-3 py-1.5 rounded bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200 cursor-pointer" @click="toggleSave(selectedJob)">
                {{ savedIds.has(selectedJob.id) ? 'ูุญููุธ' : 'ุญูุธ' }}
              </button>
            </div>
          </div>
        </aside>
      </div>
    </div>

    <!-- apply modal -->
    <div v-if="showApply" class="fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center p-4 z-50">
      <div class="w-full max-w-lg bg-white rounded-xl border border-gray-200 shadow-lg" dir="rtl">
        <div class="px-5 py-4 border-b border-gray-200 flex items-center justify-between">
          <h3 class="font-semibold">ุชูุฏูู ุนูู: {{ applyingFor?.title }}</h3>
          <button class="text-gray-500 hover:text-gray-900 cursor-pointer" @click="closeApply">โ</button>
        </div>
        <div class="p-5 space-y-3 text-sm">
          <div>
            <label class="block mb-1 text-gray-700">ุงูุงุณู ุงููุงูู</label>
            <input v-model="applyForm.name" type="text" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2" placeholder="ูุซุงู: ุนูู  " />
          </div>
          <div>
            <label class="block mb-1 text-gray-700">ุงูุงูููู</label>
            <input v-model="applyForm.email" type="email" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2" placeholder="you@example.com" />
          </div>
          <div>
            <label class="block mb-1 text-gray-700">ุฑูู ุงููุงุชู</label>
            <input v-model="applyForm.phone" type="tel" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2" placeholder="+964 750 123 4567" />
          </div>
          <div>
            <label class="block mb-1 text-gray-700">ุฑุงุจุท ุงูุณูุฑุฉ (PDF/Drive)</label>
            <input v-model="applyForm.resumeUrl" type="url" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2" placeholder="https://..." />
          </div>
          <div>
            <label class="block mb-1 text-gray-700">ููุงุญุธุฉ</label>
            <textarea v-model="applyForm.note" rows="3" class="w-full rounded-md bg-gray-50 border border-gray-300 px-3 py-2" placeholder="ุงูุชุจ ุฑุณุงูุฉ ูุตูุฑุฉ"></textarea>
          </div>
        </div>
        <div class="px-5 py-4 border-t border-gray-200 flex items-center justify-between">
          <p class="text-xs text-gray-500">ุจููุฑุฉ ูุญุฏุฉ ุฑุงุญ ููุตู ุทูุจู ููุดุฑูุฉ ุงูุนุฑุงููุฉ.</p>
          <div class="flex gap-2">
            <button class="px-3 py-1.5 rounded bg-gray-100 border border-gray-200 text-gray-700 hover:bg-gray-200 cursor-pointer" @click="closeApply">ุฅูุบุงุก</button>
            <button class="px-3 py-1.5 rounded bg-[#0A66C2] text-white hover:brightness-110 cursor-pointer" @click="submitApply">ุฅุฑุณุงู ุงูุทูุจ</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { motion } from 'motion-v'
import { computed, reactive, ref } from 'vue'

defineOptions({ name: 'JobsPage' })

interface Job {
  id: string
  title: string
  company: string
  location: string
  region: string
  postedAt: string
  description: string
  requirements: string[]
  badges: string[]
  logo: string
  salary: string
}

const jobs = ref<Job[]>([
  {
    id: '1',
    title: 'ูุทูุฑ Vue.js + TypeScript',
    company: 'ุดุฑูุฉ ุงูุฑุงูุฏูู ุงูุชูููุฉ',
    location: 'ุจุบุฏุงุฏ (ุฏูุงู ูุฌูู)',
    region: 'ุจุบุฏุงุฏ ุงูุฑุดูุฏ',
    postedAt: 'ูุจู ููู',
    description:
      'ูุจุญุซ ุนู ูุทููุฑ ูุญุจ ุงููุงุฌูุงุช ุงููุฑุชุจุฉ ูุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุงูุนุฑุจูุฉ. ุชุดุชุบู ููู ูุฑูู ุตุบูุฑ ูุดูุทุ ูุชุณุงูู ุจุจูุงุก ููุชุฌุงุช SaaS ููุณูู ุงูุนุฑุงูู. ูู ุจุบุฏุงุฏ ุงูุฑุดูุฏ ุฅูู ูู ุงูุนุฑุงู! ๐ฎ๐ถ',
    requirements: ['ูก-ูฃ ุณููู ุฎุจุฑุฉ', 'Vue 3 ู Pinia', 'ุฎุจุฑุฉ Tailwind ู Vite', 'ุงุฎุชุจุงุฑุงุช ุฃุณุงุณูุฉ', 'ุญุจ ููุชูููุฉ ุงูุนุฑุงููุฉ'],
    badges: ['ุฏูุงู ูุงูู', 'ุฑุงุชุจ ูุฌุฒู', 'ุชุฃููู ุตุญู', '๐ด ุนุฑุงูู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=RafTech',
    salary: 'ูขูซูฅู - ูฃูซูฅู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '2',
    title: 'ูููุฏุณ ูุฑููุชูุฏ (React/Vue)',
    company: 'ุจุบุฏุงุฏ ุฏูุฌูุชุงู',
    location: 'ุนู ุจูุนุฏ (ุงูุนุฑุงู)',
    region: 'ุจุบุฏุงุฏ',
    postedAt: 'ูุจู ูฃ ุฃูุงู',
    description:
      'ูุดุชุบู ุนูู ููุตูุฉ ูุญุชูู ุชุนููููุฉ ููุทูุงุจ ุงูุนุฑุงูููู. ุชุญุชุงุฌ ุชุนุฑู ุชุชุนุงูู ููุง ุงูุฃุฏุงุก ูุงููุชุตูุญุงุช ุงููุฏููุฉ ูุณุจููุง. ูุฑูู ูุฑู ูุซูุงูุฉ ุทูุจุฉ. ูู ุฏุฌูุฉ ูุงููุฑุงุช ุฅูู ูู ุงูุนุฑุงู! ๐',
    requirements: ['ุฎุจุฑุฉ ุจุงูุฃุฏุงุก', 'SSR basics', 'Git ู CI', 'ุญุจ ููุชุนููู ุงูุนุฑุงูู'],
    badges: ['ุนู ุจูุนุฏ', 'ุฏูุงู ูุงูู', '๐ ุนุฑุงูู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=BaghdadDigital',
    salary: 'ูขู - ูขูซูจู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '3',
    title: 'ูุตูู/ูุฉ UI ูุน ุญุจ ููุฎุท ุงูุนุฑุจู',
    company: 'ุฃุฑุจูู ุณุชูุฏููุฒ',
    location: 'ุฃุฑุจูู (ููุชุจ)',
    region: 'ููุฑุฏุณุชุงู',
    postedAt: 'ูุจู ุฃุณุจูุน',
    description:
      'ุชุตููู ูุงุฌูุงุช ุญุฏูุซุฉ ูุชูุงููุฉ ูุน ุงูุนุฑุจูุฉ ูุงูููุฑุฏูุฉุ ุชุนุงูู ูููู ููุง ุงููุทูุฑููุ ูุชูุซูู ููููุงุช ุชุตููู. ูู ุฃุฑุจูู ุงูุฌูููุฉ ุฅูู ูู ุงูุนุฑุงู! ๐๏ธ',
    requirements: ['Figma', 'ูุธุงู ุชุตููู', 'ุฃุณุงุณูุงุช CSS', 'ุญุจ ููุซูุงูุฉ ุงูุนุฑุงููุฉ'],
    badges: ['ููุชุจ', 'ุฏูุงู ุฌุฒุฆู', '๐๏ธ ููุฑุฏุณุชุงู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=ErbilStudios',
    salary: 'ูกูซูจู - ูขูซูขู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '4',
    title: 'ูุทูุฑ ุจุงู ุฅูุฏ (Node.js)',
    company: 'ุงูุจุตุฑุฉ ุงูุชูููุฉ',
    location: 'ุงูุจุตุฑุฉ (ููุชุจ)',
    region: 'ุงูุจุตุฑุฉ ุงูุฎุถุฑุงุก',
    postedAt: 'ูุจู ููููู',
    description:
      'ุชุทููุฑ APIs ูููุฉ ููุดุฑูุงุช ุงูุนุฑุงููุฉุ ุงูุนูู ูุน ููุงุนุฏ ุงูุจูุงูุงุชุ ูุชุทููุฑ ุญููู ุชูููุฉ ูุจุชูุฑุฉ. ูู ุดุท ุงูุนุฑุจ ุฅูู ูู ุงูุนุฑุงู! ๐',
    requirements: ['Node.js ู Express', 'ููุงุนุฏ ุงูุจูุงูุงุช', 'REST APIs', 'ุญุจ ููุชูููุฉ ุงูุนุฑุงููุฉ'],
    badges: ['ุฏูุงู ูุงูู', 'ุฑุงุชุจ ูุฌุฒู', '๐ ุงูุจุตุฑุฉ'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=BasraTech',
    salary: 'ูขูซูขู - ูฃู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '5',
    title: 'ูููุฏุณ DevOps',
    company: 'ุงูููุตู ุงูุชูููุฉ',
    location: 'ุงูููุตู (ุฏูุงู ูุฌูู)',
    region: 'ููููู ุงูุนุฑููุฉ',
    postedAt: 'ูุจู ูฅ ุฃูุงู',
    description:
      'ุฅุฏุงุฑุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุณุญุงุจูุฉุ ุฃุชูุชุฉ ุงููุดุฑุ ูุถูุงู ุงุณุชูุฑุงุฑ ุงูุฃูุธูุฉ. ูู ุฃุฑุถ ุงูุญุถุงุฑุงุช ุฅูู ูุณุชูุจู ุงูุชูููุฉ! ๐๏ธ',
    requirements: ['Docker ู Kubernetes', 'AWS/Azure', 'CI/CD', 'ุญุจ ููุนุฑุงู'],
    badges: ['ุฏูุงู ูุฌูู', 'ุฑุงุชุจ ูุฌุฒู', '๐๏ธ ููููู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=MosulTech',
    salary: 'ูขูซูฅู - ูฃูซูขู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '6',
    title: 'ูุญูู ุจูุงูุงุช (Data Analyst)',
    company: 'ููุฑุฏุณุชุงู ุฏุงุชุง',
    location: 'ุฃุฑุจูู (ููุชุจ)',
    region: 'ููุฑุฏุณุชุงู',
    postedAt: 'ูุจู ูค ุฃูุงู',
    description:
      'ุชุญููู ุงูุจูุงูุงุช ููุดุฑูุงุช ุงูุนุฑุงููุฉ ูุงูููุฑุฏูุฉุ ุชุทููุฑ ุชูุงุฑูุฑ ุชูุงุนููุฉุ ููุณุงุนุฏุฉ ูู ุงุชุฎุงุฐ ุงููุฑุงุฑุงุช ุงููุฏุฑูุณุฉ. ูู ุฃุฑุจูู ุฅูู ูุณุชูุจู ุงูุจูุงูุงุช! ๐',
    requirements: ['Python ู Pandas', 'SQL ูุชูุฏู', 'Power BI/Tableau', 'ุฎุจุฑุฉ ูข-ูค ุณููู'],
    badges: ['ุฏูุงู ูุงูู', 'ูุฒุงูุง ููุชุงุฒุฉ', '๐๏ธ ููุฑุฏุณุชุงู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=KurdistanData',
    salary: 'ูขูซูจู - ูฃูซูฅู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '7',
    title: 'ูุทูุฑ ููุจุงูู (React Native)',
    company: 'ุฃุฑุจูู ุขุจุณ',
    location: 'ุฃุฑุจูู (ุฏูุงู ูุฌูู)',
    region: 'ููุฑุฏุณุชุงู',
    postedAt: 'ูุจู ุฃุณุจูุน',
    description:
      'ุชุทููุฑ ุชุทุจููุงุช ููุจุงูู ููุดุฑูุงุช ุงูุนุฑุงููุฉุ ุงูุนูู ูุน React Nativeุ ูุชุทููุฑ ุชุฌุงุฑุจ ูุณุชุฎุฏู ูุญููุฉ. ูู ุฃุฑุจูู ุฅูู ุฌููุจ ุงูุนุฑุงูููู! ๐ฑ',
    requirements: ['React Native', 'ุฎุจุฑุฉ ูก-ูฃ ุณููู', 'Redux/MobX', 'Native modules'],
    badges: ['ุฏูุงู ูุฌูู', 'ูุฑููุฉ ูู ุงูุนูู', '๐๏ธ ููุฑุฏุณุชุงู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=ErbilApps',
    salary: 'ูขู - ูขูซูจู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '8',
    title: 'ูููุฏุณ ุฃูู ุณูุจุฑุงูู',
    company: 'ุงูุนุฑุงู ููุงูุฏ',
    location: 'ุจุบุฏุงุฏ (ููุชุจ)',
    region: 'ุจุบุฏุงุฏ',
    postedAt: 'ูุจู ูฃ ุฃูุงู',
    description:
      'ุญูุงูุฉ ุงูุจููุฉ ุงูุชุญุชูุฉ ุงูุณุญุงุจูุฉ ุงูุนุฑุงููุฉุ ุชุทููุฑ ุณูุงุณุงุช ุงูุฃูุงูุ ููุฑุงูุจุฉ ุงูุชูุฏูุฏุงุช ุงูุณูุจุฑุงููุฉ. ูู ุจุบุฏุงุฏ ุฅูู ุฃูุงู ุงูุนุฑุงู ุงูุฑููู! ๐',
    requirements: ['ุฎุจุฑุฉ ูฃ-ูฅ ุณููู', 'AWS Security', 'SIEM tools', 'ุดูุงุฏุงุช ุฃูููุฉ'],
    badges: ['ุฏูุงู ูุงูู', 'ุฑุงุชุจ ููุชุงุฒ', '๐ ุฃูู ุณูุจุฑุงูู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=IraqCloud',
    salary: 'ูฃู - ูคู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '9',
    title: 'ูุทูุฑ ููู ุณุชุงู (Full Stack)',
    company: 'ููููู ุชู',
    location: 'ุงูููุตู (ุฏูุงู ูุฌูู)',
    region: 'ููููู ุงูุนุฑููุฉ',
    postedAt: 'ูุจู ููู',
    description:
      'ุชุทููุฑ ุชุทุจููุงุช ุชุนููููุฉ ููุทูุงุจ ุงูุนุฑุงููููุ ุงูุนูู ูุน Vue.js ู Node.jsุ ูุจูุงุก ููุตุงุช ุชุนููููุฉ ุชูุงุนููุฉ. ูู ุฃุฑุถ ุงูุญุถุงุฑุงุช ุฅูู ูุณุชูุจู ุงูุชุนููู! ๐',
    requirements: ['Vue.js + Node.js', 'MongoDB/PostgreSQL', 'ุฎุจุฑุฉ ูข-ูค ุณููู', 'ุญุจ ููุชุนููู'],
    badges: ['ุฏูุงู ูุฌูู', 'ูุดุงุฑูุน ุชุนููููุฉ', '๐๏ธ ููููู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=NinevehTech',
    salary: 'ูขูซูฅู - ูฃูซูขู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '10',
    title: 'ูููุฏุณ ุฐูุงุก ุงุตุทูุงุนู',
    company: 'ุจุบุฏุงุฏ AI',
    location: 'ุจุบุฏุงุฏ (ููุชุจ)',
    region: 'ุจุบุฏุงุฏ ุงูุฑุดูุฏ',
    postedAt: 'ูุจู ูฆ ุฃูุงู',
    description:
      'ุชุทููุฑ ุญููู ุฐูุงุก ุงุตุทูุงุนู ููุดุฑูุงุช ุงูุนุฑุงููุฉุ ุงูุนูู ูุน Python ู TensorFlowุ ูุจูุงุก ููุงุฐุฌ ุชุนูู ุขูู ูุญููุฉ. ูู ุจุบุฏุงุฏ ุฅูู ูุณุชูุจู ุงูุฐูุงุก ุงูุงุตุทูุงุนู! ๐ค',
    requirements: ['Python + TensorFlow', 'ุฎุจุฑุฉ ูฃ-ูฅ ุณููู', 'Machine Learning', 'ุดูุงุฏุงุช AI'],
    badges: ['ุฏูุงู ูุงูู', 'ุฑุงุชุจ ููุชุงุฒ', '๐ค ุฐูุงุก ุงุตุทูุงุนู'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=BaghdadAI',
    salary: 'ูฃูซูฅู - ูคูซูฅู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '11',
    title: 'ูุตูู UX/UI ูุชุฎุตุต ุจุงูุนุฑุจูุฉ',
    company: 'ุงูุจุตุฑุฉ ุฏูุฒุงูู',
    location: 'ุงูุจุตุฑุฉ (ุฏูุงู ูุฌูู)',
    region: 'ุงูุจุตุฑุฉ ุงูุฎุถุฑุงุก',
    postedAt: 'ูุจู ูค ุฃูุงู',
    description:
      'ุชุตููู ุชุฌุงุฑุจ ูุณุชุฎุฏู ูุฎุตุตุฉ ููุซูุงูุฉ ุงูุนุฑุงููุฉุ ุงูุนูู ูุน ุฃุฏูุงุช ุงูุชุตููู ุงูุญุฏูุซุฉุ ูุชุทููุฑ ุฃูุธูุฉ ุชุตููู ุนุฑุจูุฉ. ูู ุงูุจุตุฑุฉ ุฅูู ุชุฌุฑุจุฉ ุนุฑุงููุฉ  ุงูุฃุตูุฉ! ๐จ',
    requirements: ['Figma/Sketch', 'ุฎุจุฑุฉ ูข-ูค ุณููู', 'User Research', 'ููู ุงูุซูุงูุฉ ุงูุนุฑุงููุฉ'],
    badges: ['ุฏูุงู ูุฌูู', 'ุชุตููู ุนุฑุจู', '๐ ุงูุจุตุฑุฉ'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=BasraDesign',
    salary: 'ูขู - ูขูซูจู ุฏููุงุฑ ุนุฑุงูู'
  },
  {
    id: '12',
    title: 'ูุฏูุฑ ูุดุงุฑูุน ุชูููุฉ',
    company: 'ุงูุฑุงูุฏูู ุงูุชูููุฉ',
    location: 'ุจุบุฏุงุฏ (ููุชุจ)',
    region: 'ุจุบุฏุงุฏ ุงูุฑุดูุฏ',
    postedAt: 'ูุจู ุฃุณุจูุน',
    description:
      'ุฅุฏุงุฑุฉ ูุดุงุฑูุน ุชูููุฉ ููุดุฑูุงุช ุงูุนุฑุงููุฉุ ุชูุณูู ุงููุฑู ุงูุชูููุฉุ ูุถูุงู ุชุณููู ุงููุดุงุฑูุน ูู ุงูููุช ุงููุญุฏุฏ. ูู ุจุบุฏุงุฏ ุฅูู ูุฌุงุญ ุงููุดุงุฑูุน ุงูุนุฑุงููุฉ! ๐',
    requirements: ['ุฎุจุฑุฉ ูฅ+ ุณููู', 'PMP ุดูุงุฏุฉ', 'Agile/Scrum', 'ููุงุฏุฉ ูุฑู'],
    badges: ['ุฏูุงู ูุงูู', 'ุฑุงุชุจ ููุชุงุฒ', '๐ ุฅุฏุงุฑุฉ ูุดุงุฑูุน'],
    logo: 'https://api.dicebear.com/7.x/shapes/svg?seed=RafTech',
    salary: 'ูคู - ูฅู ุฏููุงุฑ ุนุฑุงูู'
  }
])

const savedIds = ref<Set<string>>(new Set())
const selectedJob = ref<Job | null>(jobs.value[0])

const filters = reactive({
  fullTime: false,
  partTime: false,
  remote: false,
  experience: '' as 'junior' | 'mid' | 'senior' | '',
  company: '',
  baghdad: false,
  erbil: false,
  basra: false,
  mosul: false
})

const filteredJobs = computed(() => {
  return jobs.value.filter((j) => {
    const byType =
      (!filters.fullTime && !filters.partTime && !filters.remote) ||
      (filters.fullTime && j.badges.includes('ุฏูุงู ูุงูู')) ||
      (filters.partTime && j.badges.includes('ุฏูุงู ุฌุฒุฆู')) ||
      (filters.remote && j.badges.includes('ุนู ุจูุนุฏ'))

    const byExp = !filters.experience ||
      (filters.experience === 'junior' && j.requirements.some((r) => r.includes('ูก-ูฃ'))) ||
      (filters.experience === 'mid' && j.requirements.some((r) => r.includes('ูฃ-ูฅ'))) ||
      (filters.experience === 'senior' && j.requirements.some((r) => r.includes('ูฅ+')))

    const byCompany = !filters.company || j.company.includes(filters.company)

    const byRegion =
      (!filters.baghdad && !filters.erbil && !filters.basra && !filters.mosul) ||
      (filters.baghdad && j.region.includes('ุจุบุฏุงุฏ')) ||
      (filters.erbil && j.region.includes('ููุฑุฏุณุชุงู')) ||
      (filters.basra && j.region.includes('ุงูุจุตุฑุฉ')) ||
      (filters.mosul && j.region.includes('ููููู'))

    return (!!byType) && (!!byExp) && (!!byCompany) && (!!byRegion)
  })
})

function selectJob(job: Job) {
  selectedJob.value = job
}

function toggleSave(job: Job) {
  if (savedIds.value.has(job.id)) savedIds.value.delete(job.id)
  else savedIds.value.add(job.id)
}

const showApply = ref(false)
const applyingFor = ref<Job | null>(null)
const applyForm = reactive({ name: '', email: '', phone: '', resumeUrl: '', note: '' })

function openApply(job: Job) {
  applyingFor.value = job
  showApply.value = true
}
function closeApply() {
  showApply.value = false
}
function resetFilters() {
  filters.fullTime = false
  filters.partTime = false
  filters.remote = false
  filters.experience = ''
  filters.company = ''
  filters.baghdad = false
  filters.erbil = false
  filters.basra = false
  filters.mosul = false
}
function applyFilters() {
  // computed handles filtering reactively
}
function submitApply() {
  // naive validation
  if (!applyForm.name || !applyForm.email || !applyForm.resumeUrl) {
    alert('ุฑุฌุงุกู ูููู ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ')
    return
  }
  showApply.value = false
  alert('ุชู ุฅุฑุณุงู ุทูุจู ุจูุฌุงุญุ ุจุงูุชูููู! ๐ฎ๐ถ')
  applyForm.name = ''
  applyForm.email = ''
  applyForm.phone = ''
  applyForm.resumeUrl = ''
  applyForm.note = ''
}
</script>
